{"ast":null,"code":"var _ = require('lodash'),\n  RUNTIME_PACKAGE = require('../package.json'),\n  /**\n   * List of postman packages to include while generating dependency object\n   *\n   * @const\n   * @type {String[]}\n   */\n  PACKAGES_TO_CONSIDER = {\n    'chai-postman': true,\n    'postman-collection': true,\n    'postman-request': true,\n    'postman-sandbox': true,\n    uniscope: true,\n    uvm: true\n  },\n  /**\n   * Generate object containing version and dependencies of Runtime or given module.\n   *\n   * @param {String} [moduleName] - Module name\n   * @param {Boolean} [deepDependencies=true] - Do depth dependencies traversal or stop at root\n   * @param {Object} [moduleData={}] - Object to store module data\n   * @returns {Object}\n   *\n   * @example <caption>Returned Object Structure</caption>\n   * var runtime = require('postman-runtime');\n   * runtime.version();\n   * {\n   *     version: '7.6.1',\n   *     dependencies: {\n   *         'postman-collection' : {\n   *             version: '3.4.2',\n   *             dependencies: {\n   *                 'postman-request': {\n   *                     version: '2.88.1-postman.5'\n   *                 }\n   *             }\n   *         },\n   *         'postman-request': {\n   *             version: '2.88.1-postman.5'\n   *         }\n   *     }\n   * }\n   */\n  getVersionData = function (moduleName, deepDependencies, moduleData) {\n    // Set default values of function arguments if not given\n    // @note Argument moduleData is undefined if function is called directly.\n    // Otherwise moduleData will contain object if called recursively.\n    !moduleData && (moduleData = {});\n\n    // Include nested dependencies in moduleData object only if deepDependencies=true.\n    // Return only direct dependencies of module if deepDependencies=false.\n    deepDependencies === undefined && (deepDependencies = true);\n    var version,\n      // Runtime's package.json is considered by default\n      packageJson = RUNTIME_PACKAGE;\n\n    // bail out if either dependency not in PACKAGES_TO_CONSIDER\n    // or not Runtime's dependency\n    if (moduleName && !(PACKAGES_TO_CONSIDER[moduleName] && (_.has(packageJson, ['dependencies', moduleName]) || _.has(packageJson, ['devDependencies', moduleName])))) {\n      return;\n    }\n\n    // if module name is given in function argument, consider that module's package.json instead of default\n    if (moduleName) {\n      // eslint-disable-next-line security/detect-non-literal-require\n      packageJson = require(require.resolve(`${moduleName}/package.json`));\n    }\n\n    // set version of dependency given as function argument or Runtime\n    moduleData.version = packageJson.version;\n    moduleData.dependencies = {};\n    _.forEach(PACKAGES_TO_CONSIDER, function (value, key) {\n      // if key is normal dependency\n      if (_.has(packageJson, ['dependencies', key])) {\n        version = packageJson.dependencies[key];\n      }\n      // else if key is devDependency\n      else if (_.has(packageJson, ['devDependencies', key])) {\n        version = packageJson.devDependencies[key];\n      }\n      // skip if key is not listed as dependency in packageJson\n      else {\n        return;\n      }\n\n      // include dependency in module data\n      moduleData.dependencies[key] = {\n        version: version,\n        dependencies: {}\n      };\n\n      // recursive call to include deep-dependency\n      if (!moduleName && deepDependencies) {\n        getVersionData(key, deepDependencies, moduleData.dependencies[key]);\n      }\n\n      // delete if no deep-dependency found\n      if (!_.size(moduleData.dependencies[key].dependencies)) {\n        delete moduleData.dependencies[key].dependencies;\n      }\n    });\n    return moduleData;\n  };\nmodule.exports = getVersionData;","map":{"version":3,"names":["_","require","RUNTIME_PACKAGE","PACKAGES_TO_CONSIDER","uniscope","uvm","getVersionData","moduleName","deepDependencies","moduleData","undefined","version","packageJson","has","resolve","dependencies","forEach","value","key","devDependencies","size","module","exports"],"sources":["/Users/Qusai.Qishta/node_modules/postman-runtime/lib/version.js"],"sourcesContent":["var _ = require('lodash'),\n    RUNTIME_PACKAGE = require('../package.json'),\n\n    /**\n     * List of postman packages to include while generating dependency object\n     *\n     * @const\n     * @type {String[]}\n     */\n    PACKAGES_TO_CONSIDER = {\n        'chai-postman': true,\n        'postman-collection': true,\n        'postman-request': true,\n        'postman-sandbox': true,\n        uniscope: true,\n        uvm: true\n    },\n\n    /**\n     * Generate object containing version and dependencies of Runtime or given module.\n     *\n     * @param {String} [moduleName] - Module name\n     * @param {Boolean} [deepDependencies=true] - Do depth dependencies traversal or stop at root\n     * @param {Object} [moduleData={}] - Object to store module data\n     * @returns {Object}\n     *\n     * @example <caption>Returned Object Structure</caption>\n     * var runtime = require('postman-runtime');\n     * runtime.version();\n     * {\n     *     version: '7.6.1',\n     *     dependencies: {\n     *         'postman-collection' : {\n     *             version: '3.4.2',\n     *             dependencies: {\n     *                 'postman-request': {\n     *                     version: '2.88.1-postman.5'\n     *                 }\n     *             }\n     *         },\n     *         'postman-request': {\n     *             version: '2.88.1-postman.5'\n     *         }\n     *     }\n     * }\n     */\n    getVersionData = function (moduleName, deepDependencies, moduleData) {\n        // Set default values of function arguments if not given\n        // @note Argument moduleData is undefined if function is called directly.\n        // Otherwise moduleData will contain object if called recursively.\n        !moduleData && (moduleData = {});\n\n        // Include nested dependencies in moduleData object only if deepDependencies=true.\n        // Return only direct dependencies of module if deepDependencies=false.\n        (deepDependencies === undefined) && (deepDependencies = true);\n\n        var version,\n\n            // Runtime's package.json is considered by default\n            packageJson = RUNTIME_PACKAGE;\n\n        // bail out if either dependency not in PACKAGES_TO_CONSIDER\n        // or not Runtime's dependency\n        if (\n            moduleName &&\n            !(\n                PACKAGES_TO_CONSIDER[moduleName] &&\n                (\n                    _.has(packageJson, ['dependencies', moduleName]) ||\n                    _.has(packageJson, ['devDependencies', moduleName])\n                )\n            )\n        ) {\n            return;\n        }\n\n        // if module name is given in function argument, consider that module's package.json instead of default\n        if (moduleName) {\n            // eslint-disable-next-line security/detect-non-literal-require\n            packageJson = require(require.resolve(`${moduleName}/package.json`));\n        }\n\n        // set version of dependency given as function argument or Runtime\n        moduleData.version = packageJson.version;\n        moduleData.dependencies = {};\n\n        _.forEach(PACKAGES_TO_CONSIDER, function (value, key) {\n            // if key is normal dependency\n            if (_.has(packageJson, ['dependencies', key])) {\n                version = packageJson.dependencies[key];\n            }\n            // else if key is devDependency\n            else if (_.has(packageJson, ['devDependencies', key])) {\n                version = packageJson.devDependencies[key];\n            }\n            // skip if key is not listed as dependency in packageJson\n            else {\n                return;\n            }\n\n            // include dependency in module data\n            moduleData.dependencies[key] = {\n                version: version,\n                dependencies: {}\n            };\n\n            // recursive call to include deep-dependency\n            if (!moduleName && deepDependencies) {\n                getVersionData(key, deepDependencies, moduleData.dependencies[key]);\n            }\n\n            // delete if no deep-dependency found\n            if (!_.size(moduleData.dependencies[key].dependencies)) {\n                delete moduleData.dependencies[key].dependencies;\n            }\n        });\n\n        return moduleData;\n    };\n\nmodule.exports = getVersionData;\n"],"mappings":"AAAA,IAAIA,CAAC,GAAGC,OAAO,CAAC,QAAQ,CAAC;EACrBC,eAAe,GAAGD,OAAO,CAAC,iBAAiB,CAAC;EAE5C;AACJ;AACA;AACA;AACA;AACA;EACIE,oBAAoB,GAAG;IACnB,cAAc,EAAE,IAAI;IACpB,oBAAoB,EAAE,IAAI;IAC1B,iBAAiB,EAAE,IAAI;IACvB,iBAAiB,EAAE,IAAI;IACvBC,QAAQ,EAAE,IAAI;IACdC,GAAG,EAAE;EACT,CAAC;EAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACIC,cAAc,GAAG,UAAUC,UAAU,EAAEC,gBAAgB,EAAEC,UAAU,EAAE;IACjE;IACA;IACA;IACA,CAACA,UAAU,KAAKA,UAAU,GAAG,CAAC,CAAC,CAAC;;IAEhC;IACA;IACCD,gBAAgB,KAAKE,SAAS,KAAMF,gBAAgB,GAAG,IAAI,CAAC;IAE7D,IAAIG,OAAO;MAEP;MACAC,WAAW,GAAGV,eAAe;;IAEjC;IACA;IACA,IACIK,UAAU,IACV,EACIJ,oBAAoB,CAACI,UAAU,CAAC,KAE5BP,CAAC,CAACa,GAAG,CAACD,WAAW,EAAE,CAAC,cAAc,EAAEL,UAAU,CAAC,CAAC,IAChDP,CAAC,CAACa,GAAG,CAACD,WAAW,EAAE,CAAC,iBAAiB,EAAEL,UAAU,CAAC,CAAC,CACtD,CACJ,EACH;MACE;IACJ;;IAEA;IACA,IAAIA,UAAU,EAAE;MACZ;MACAK,WAAW,GAAGX,OAAO,CAACA,OAAO,CAACa,OAAO,CAAE,GAAEP,UAAW,eAAc,CAAC,CAAC;IACxE;;IAEA;IACAE,UAAU,CAACE,OAAO,GAAGC,WAAW,CAACD,OAAO;IACxCF,UAAU,CAACM,YAAY,GAAG,CAAC,CAAC;IAE5Bf,CAAC,CAACgB,OAAO,CAACb,oBAAoB,EAAE,UAAUc,KAAK,EAAEC,GAAG,EAAE;MAClD;MACA,IAAIlB,CAAC,CAACa,GAAG,CAACD,WAAW,EAAE,CAAC,cAAc,EAAEM,GAAG,CAAC,CAAC,EAAE;QAC3CP,OAAO,GAAGC,WAAW,CAACG,YAAY,CAACG,GAAG,CAAC;MAC3C;MACA;MAAA,KACK,IAAIlB,CAAC,CAACa,GAAG,CAACD,WAAW,EAAE,CAAC,iBAAiB,EAAEM,GAAG,CAAC,CAAC,EAAE;QACnDP,OAAO,GAAGC,WAAW,CAACO,eAAe,CAACD,GAAG,CAAC;MAC9C;MACA;MAAA,KACK;QACD;MACJ;;MAEA;MACAT,UAAU,CAACM,YAAY,CAACG,GAAG,CAAC,GAAG;QAC3BP,OAAO,EAAEA,OAAO;QAChBI,YAAY,EAAE,CAAC;MACnB,CAAC;;MAED;MACA,IAAI,CAACR,UAAU,IAAIC,gBAAgB,EAAE;QACjCF,cAAc,CAACY,GAAG,EAAEV,gBAAgB,EAAEC,UAAU,CAACM,YAAY,CAACG,GAAG,CAAC,CAAC;MACvE;;MAEA;MACA,IAAI,CAAClB,CAAC,CAACoB,IAAI,CAACX,UAAU,CAACM,YAAY,CAACG,GAAG,CAAC,CAACH,YAAY,CAAC,EAAE;QACpD,OAAON,UAAU,CAACM,YAAY,CAACG,GAAG,CAAC,CAACH,YAAY;MACpD;IACJ,CAAC,CAAC;IAEF,OAAON,UAAU;EACrB,CAAC;AAELY,MAAM,CAACC,OAAO,GAAGhB,cAAc"},"metadata":{},"sourceType":"script"}